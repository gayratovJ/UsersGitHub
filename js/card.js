const UsersRow = document.querySelector( ".users" );

function UsersCard( {
  login,
  avatar_url,
  followers_url,
  repos_url,
} ) {
  return `
<div class="col-12">
            <div class="lft">
              <div class="about-user">
                <div class="head-img">
  <img src="${avatar_url}" alt="">
                </div>
                <div class="img"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16"
                    fill="none">
                    <path
                      d="M2.5 2.5C2.5 1.83696 2.76339 1.20107 3.23223 0.732233C3.70108 0.263392 4.33696 0 5 0L13.75 0C13.9489 0 14.1397 0.0790176 14.2803 0.21967C14.421 0.360322 14.5 0.551088 14.5 0.75V13.25C14.5 13.4489 14.421 13.6397 14.2803 13.7803C14.1397 13.921 13.9489 14 13.75 14H11.25C11.0511 14 10.8603 13.921 10.7197 13.7803C10.579 13.6397 10.5 13.4489 10.5 13.25C10.5 13.0511 10.579 12.8603 10.7197 12.7197C10.8603 12.579 11.0511 12.5 11.25 12.5H13V10.5H5C4.80308 10.5 4.61056 10.5582 4.44657 10.6672C4.28257 10.7762 4.15442 10.9312 4.07816 11.1128C4.00191 11.2943 3.98096 11.4943 4.01793 11.6878C4.0549 11.8812 4.14816 12.0594 4.286 12.2C4.35495 12.2704 4.40935 12.3537 4.44611 12.4451C4.48287 12.5365 4.50126 12.6343 4.50024 12.7328C4.49922 12.8313 4.4788 12.9287 4.44016 13.0193C4.40151 13.1099 4.34539 13.1921 4.275 13.261C4.20461 13.3299 4.12133 13.3843 4.02992 13.4211C3.93851 13.4579 3.84075 13.4763 3.74222 13.4752C3.6437 13.4742 3.54634 13.4538 3.45571 13.4152C3.36508 13.3765 3.28295 13.3204 3.214 13.25C2.75571 12.7829 2.49929 12.1544 2.5 11.5V2.5ZM13 1.5H5C4.73478 1.5 4.48043 1.60536 4.29289 1.79289C4.10536 1.98043 4 2.23478 4 2.5V9.208C4.31534 9.0702 4.65586 8.99937 5 9H13V1.5ZM5.5 12.25C5.5 12.1837 5.52634 12.1201 5.57322 12.0732C5.62011 12.0263 5.6837 12 5.75 12H9.25C9.31631 12 9.37989 12.0263 9.42678 12.0732C9.47366 12.1201 9.5 12.1837 9.5 12.25V15.5C9.5 15.5464 9.48707 15.5919 9.46266 15.6314C9.43826 15.6709 9.40333 15.7028 9.3618 15.7236C9.32028 15.7444 9.27379 15.7532 9.22755 15.749C9.18131 15.7448 9.13714 15.7279 9.1 15.7L7.65 14.613C7.60679 14.5804 7.55413 14.5627 7.5 14.5627C7.44587 14.5627 7.39321 14.5804 7.35 14.613L5.9 15.7C5.86286 15.7279 5.81869 15.7448 5.77245 15.749C5.72621 15.7532 5.67972 15.7444 5.6382 15.7236C5.59667 15.7028 5.56175 15.6709 5.53734 15.6314C5.51293 15.5919 5.5 15.5464 5.5 15.5V12.25Z"
                      fill="#8B949E" />
                  </svg></div>
                <div class="name">
                  <h1 class="blue">
                    ${login}
                  </h1>
                </div>
              </div>
              <div class="followers">
                <h4></h4>
                <h4>Repositories : <p>${repos_url}</p>
                </h4>
                <h4>Followers : <p>${followers_url}</p>
                </h4>
              </div>
            </div>
            <div class="ryt">
              <div class="btn">
                <button type="submit">Star</button>
              </div>
              <div class="star">
                <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
                  <path
                    d="M8.62504 0.25C8.76506 0.24991 8.9023 0.289014 9.02124 0.362887C9.14018 0.43676 9.23606 0.542452 9.29804 0.668L11.18 4.483L15.39 5.095C15.5285 5.11511 15.6586 5.17355 15.7656 5.26372C15.8726 5.35388 15.9522 5.47218 15.9955 5.60523C16.0387 5.73829 16.0439 5.8808 16.0105 6.01665C15.977 6.1525 15.9062 6.27628 15.806 6.374L12.76 9.344L13.479 13.536C13.5024 13.6738 13.4867 13.8154 13.4339 13.9449C13.3811 14.0743 13.2932 14.1865 13.1802 14.2687C13.0671 14.3509 12.9333 14.3999 12.7939 14.4102C12.6545 14.4205 12.515 14.3917 12.391 14.327L8.62504 12.347L4.85904 14.327C4.73523 14.392 4.59571 14.4211 4.45623 14.411C4.31676 14.4009 4.18288 14.352 4.06972 14.2699C3.95657 14.1877 3.86863 14.0755 3.81586 13.946C3.76308 13.8165 3.74756 13.6749 3.77104 13.537L4.49104 9.343L1.44304 6.374C1.34261 6.27632 1.27154 6.15247 1.23789 6.01647C1.20425 5.88047 1.20936 5.73777 1.25267 5.60453C1.29597 5.47129 1.37573 5.35284 1.4829 5.26261C1.59007 5.17238 1.72037 5.11397 1.85904 5.094L6.06904 4.483L7.95204 0.668C8.01402 0.542452 8.10991 0.43676 8.22885 0.362887C8.34779 0.289014 8.48503 0.24991 8.62504 0.25ZM8.62504 2.695L7.24004 5.5C7.18626 5.6089 7.10683 5.70311 7.00859 5.77453C6.91034 5.84595 6.79622 5.89244 6.67604 5.91L3.57904 6.36L5.81904 8.544C5.90619 8.62886 5.9714 8.73365 6.00903 8.84933C6.04666 8.96501 6.05559 9.0881 6.03504 9.208L5.50704 12.292L8.27604 10.836C8.38367 10.7794 8.50345 10.7499 8.62504 10.7499C8.74664 10.7499 8.86641 10.7794 8.97404 10.836L11.744 12.292L11.214 9.208C11.1935 9.0881 11.2024 8.96501 11.2401 8.84933C11.2777 8.73365 11.3429 8.62886 11.43 8.544L13.67 6.361L10.574 5.911C10.4539 5.89344 10.3397 5.84695 10.2415 5.77553C10.1433 5.70411 10.0638 5.6099 10.01 5.501L8.62504 2.695Z"
                    fill="#8B949E" />
                </svg>
                <p>...0000 stars</p>
              </div>
            </div>
          </div>
  `
}


async function GetUsersCard() {
  UsersRow.innerHTML = "Loading.....";
  try {
    const { users, total } = await request( "https://api.github.com/users" );
    UsersRow.innerHTML = "";

    users.map( ( User ) => {
      UsersRow.innerHTML += UsersCard( User );
    } );
    let query = new URLSearchParams( {
      page: activePage,
      limit: LIMIT,
    } );

    let pages = Math.ceil( total / LIMIT );

    pagination.innerHTML = `<li class="page-item ${activePage === 1 ? "disabled" : ""
      }">
      <button class="page-link">Previous</button>
    </li>`;

    for ( let i = 1; i <= pages; i++ ) {
      pagination.innerHTML += `
        <li class="page-item ${i === activePage ? "active" : ""
        }"><button class="page-link">${i}</button></li>
      `;
    }

    pagination.innerHTML += `<li class="page-item ${activePage === pages ? "disabled" : ""
      }">
      <button class="page-link">Next</button>
    </li>`;

    for ( let i = 0; i < pagination.children.length; i++ ) {
      let pageItem = pagination.children[ i ];
      pageItem.addEventListener( "click", () => {
        if ( i === 0 ) {
          getPage( "-" );
        } else if ( i === pages + 1 ) {
          getPage( "+" );
        } else {
          getPage( i );
        }
      } );
    }

    countriesRow.innerHTML = "";

    countries.map( ( country ) => {
      countriesRow.innerHTML += getCountryCard( country );
    } );
  } catch ( err ) {
    console.log( err );
  }
}